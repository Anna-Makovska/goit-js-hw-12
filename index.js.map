{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"48861034-650d0692db40a28ff83f5fb54\";\n\n\nexport async function getImages(value) {\n  let params = {\n    key: API_KEY,\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n//   return await axios\n//     .get(BASE_URL, { params })\n//     .then(res => {\n//       if (res.data.hits.length === 0) {\n//         iziToast.error({\n//           message:\n//             'Sorry, there are no images matching your search query. Please try again!',\n//           position: 'topRight',\n//           pauseOnHover: true,\n//           balloon: true,\n//         });\n//       }\n//       return res.data.hits;\n//     })\n//     .catch(error => {\n//       console.error(error);\n//       throw error;\n//     });\n  \n  try {\n  const res = await axios.get(BASE_URL, { params });\n      if (res.data.hits.length === 0) {\n          iziToast.error({\n              message:\n                  'Sorry, there are no images matching your search query. Please try again!',\n              position: 'topRight',\n              pauseOnHover: true,\n              balloon: true,\n          });\n      }\n      return res.data.hits;\n  } catch (error){\n          console.error(error);\n                 throw error;\n  \n      };\n  \n}\n\n","\nexport function templateImage(image) {\n    const {\n      largeImageURL,\n      webformatURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n  } = image;\n  \n    const altText = image.tags.split(',')[0];\n    return `\n    <li class=\"gallery-item\">\n    <div class=\"wrapper\"> \n\n     <a href=\"${largeImageURL}\" class=\"gallery-link\" >\n    <img src=\"${webformatURL}\"\n      class=\"gallery-image\"\n      alt=\"${altText}\"\n    />\n  </a>\n  \n    </div>\n<div class=\"details\">\n  <p class=\"detail-info\">Likes<br><span class=\"detail-value\"> ${likes}</span></p>\n  <p class=\"detail-info\">Views<br><span class=\"detail-value\"> ${views}</span> </p>\n  <p class=\"detail-info\">Comments<br><span class=\"detail-value\"> ${comments}</span> </p>\n  <p class=\"detail-info\">Downloads<br><span class=\"detail-value\"> ${downloads}</span> </p>\n\n  </div>\n    </li>\n    `;\n};\nexport function templateImages(images) {\n    return images.map(templateImage).join(\"\")\n    }\n","import { getImages } from './js/pixabay-api';\nimport { templateImages } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchform = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadButton = document.querySelector('.load-button-style');\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst params = {\n  query: '',\n  page: null,\n  perPage: 40,\n  total: '',\n\n}\n\n  hideLoadMoreBtn();\n\nsearchform.addEventListener('submit', async e => {\n  e.preventDefault();\n  params.page = 1;\n\n  params.query = searchform.elements.searchQuery.value.trim();\n  if (params.query === '') {\n    iziToast.warning({\n      message: 'Please, fill the form!',\n      position: 'topRight',\n    });\n    return;\n  }\n  loader.classList.add('visible');\n  hideLoadMoreBtn();\n\n\n \n  try {\n    const data = await getImages(params.query, params.page, params.perPage);\n    params.total = data.totalHits; \n    \n\n    console.log(data);\n    const markup = templateImages(data);\n\n    gallery.insertAdjacentHTML('beforeend', templateImages(data));\n    lightbox.refresh();\n    checkButtonStatus();\n  } catch (error) {\n    gallery.innerHTML = '';\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong, try again later!',\n    });\n    console.error(error);\n  } finally {\n    loader.classList.remove('visible');\n\n  }\n  checkButtonStatus();\n\n  e.target.reset();\n});\n\nloadButton.addEventListener('click', async (e) => {\n  e.preventDefault();\n\n  params.page += 1;\n  checkButtonStatus();\n\n  try {\n    const data = await getImages(params.query, params.page, params.perPage);\n    console.log(data);\n    const markup = templateImages(data);\n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n    checkButtonStatus();\n  } catch (error) {\n    gallery.innerHTML = '';\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong, try again later!',\n    });\n    console.error(error);\n  } finally {\n    loader.classList.remove('visible');\n\n  }\n})\n\nfunction showLoadMoreBtn () {\n   loadButton.style.display = 'block';\n  \n\n}\nfunction hideLoadMoreBtn () {\n    loadButton.style.display = 'none';\n\n}\nfunction checkButtonStatus () {\n  const perPage = 40;\n  const maxPage = Math.ceil(params.total / perPage);\n  if (params.page < maxPage) {\n    showLoadMoreBtn();\n  } else {\n    hideLoadMoreBtn();\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topLeft',\n\n    })\n  }\n}"],"names":["BASE_URL","API_KEY","getImages","value","params","res","axios","error","templateImage","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","altText","templateImages","images","searchform","gallery","loader","loadButton","lightbox","SimpleLightbox","hideLoadMoreBtn","e","iziToast","data","markup","checkButtonStatus","showLoadMoreBtn","maxPage"],"mappings":"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"}